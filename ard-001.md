# ARD-001: Реализация сервиса матчинга

## Status:
Proposed

## Context.
Принятие решений базировалось на исходных требованиях к системе (см. `initial-requirements.md`) и консернах стейкхолдеров (см. `concerns.md`).
Выделены следующие поинты, касающиеся непосредственно сервиса матчинга:

**Требования:**
- `[US-070]` Алгоритм матчинга — общий для любых образцов, состоит из набора шагов, по которым рассчитываются рейтинги 
и другие значения. Система чем-то похожа на map-reduce. Разработчики решили, что они сами будут реализовывать всю 
логику на любом языке, так как они не хотят делиться алгоритмом. Наша цель — использовать реализованные шаги в нужной 
нам последовательности, которая иногда может изменяться, при этом необходимо иметь возможность добавлять 
или редактировать шаги, как нам это необходимо.
- `[US-072]` Матчинг принимает задачу и эталонный образец, а на выход выдаёт лучшего кандидата под задачу.
Именно этого кандидата система автоматически назначает на задачу. И рассчитывает стоимость услуги.
- `[US-071]` Для корректной работы матчинга необходима информация об обычных образцах (включая их сильные и слабые 
стороны) и результаты прошлых заказов.
- `Updated (12/05)`: матчинг всегда достаёт воркера, ситуаций, когда воркер не нашёлся под задачу, не существует

**Консерны:**
- **Топ-менеджмент**
Cкоринг потенциальных работников уникален в своём роде, и логика его работы сильно выше, чем планировалось.
Бизнес в будущем хочет продавать его другим компаниям и тестировать больше гипотез;
Для скоринга работников релизный цикл неделя максимум.
- **Разработчики**
система должна работать без сбоев, а если сбой случается, то должно быть понятно, что и где чинить.
- **Админы**
простота мониторинга системы для своевременного замечания сбоев, чтобы не работать в авральном режиме.
- **Менеджеры**
Выяснилось, что котам из Happy Cat Box наш проект понравился, поэтому приходит не 10 заказов в день, 
а 10 заказов в минуту.

| Поддомен                              | Характеристика  | Тип     | Коммент                                                               |
|:--------------------------------------|:----------------|:--------|:----------------------------------------------------------------------|
| Подбор исполнителя по характеристикам | Portability     | Явная   | Сервис будет поставляться как самостоятельный продукт.                |
| Подбор исполнителя по характеристикам | Scalability     | Неявная | 10 заказов в мунуту - текущая средняя нагрузка на подбор              |
| Подбор исполнителя по характеристикам | Testability     | Явная   | За релизный цикл в 1 неделю сервис должен обновляться и тестироваться |
| Подбор исполнителя по характеристикам | Modifability    | Явная   | Бизнес хочет тестировать больше гипотез и обновлять сервис            |
| Подбор исполнителя по характеристикам | Deployability   | Явная   | Требуется релизить и выкладывать каждую неделю                        |
| Подбор исполнителя по характеристикам | Securability    | Явная   | Продается как отдельный продукт и утечки данных должны быть исключены |

## Decision. 
 Исходя из консерна топ-менеджмента об изолированной продаже функциональности, данная часть системы должна быть разработана
как изолированный сервис.
Требование `US-070` однозначно указывает на стиль реализации pipeline. 
При этом алгоиртм будет производить сопоставление характеристик, что указывает на удобство хранения оцениваемой информации 
в виде изолированной графовой базы данных.

## Consequences. 
Нарушение изолированности сервиса или его базы данных повлечет за собой проблемы с изолированной реализацией продукта.

## Сompliance.
Проверка верной реализации выбранной архитектуры будет производиться вручную, путем анализа документации и карты сервисов.
Дополнительные проверки будут реализованы автоматически.

### Fitness functions для сервиса подбора
- Релизится раз в неделю (Обсудить, как отследить релиз)
- Изолирован (обсудить, как отследить)
- Выдерживает стандартную нагрузку (определить с менеджментом величину, проверять нагрузочными тестами)
- Выдерживает пиковую нагрузку
- Причины падения определяются не дольше чем X (Обсудить с менеджментом, мерить по issue tracker)
- Анализ coupling and cohesion (Обсудить с разработчиками)

## Notes. 
Автор: Мария Кроль;
Время апрува:
Кто апрувил:
Время изменения статуса: 5/31/2023 20:20
Кто и как изменял: Created by Maria Krol